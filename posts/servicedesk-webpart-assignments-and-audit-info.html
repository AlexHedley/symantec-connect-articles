<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="AlexHedley">

  <title>Alex Hedley - ServiceDesk - WebPart - Assignments and Audit Info</title>

  <link rel="canonical" href='https://alexhedley.github.io/symantec-connect-articles/posts/servicedesk-webpart-assignments-and-audit-info'>

      <link type="application/rss+xml" rel="alternate" title="Alex Hedley" href="/symantec-connect-articles/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="Alex Hedley" href="/symantec-connect-articles/feed.atom" />

  <meta name="application-name" content='Alex Hedley' />
  <meta name="msapplication-tooltip" content='Alex Hedley' />
  <meta name="msapplication-starturl" content='/symantec-connect-articles/' />

  <meta property="og:title" content='Alex Hedley - ServiceDesk - WebPart - Assignments and Audit Info' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='https://alexhedley.github.io/symantec-connect-articles/posts/servicedesk-webpart-assignments-and-audit-info' />

  <link rel="icon" href='/symantec-connect-articles/favicon.ico'>

  <!-- Custom fonts for this template -->
  <link href='/symantec-connect-articles/vendor/fontawesome-free/css/all.min.css' rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>

  <!-- Styles for this template (also includes Bootstrap) -->
  <link href='/symantec-connect-articles/scss/clean-blog.css' rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet">

  <link href="/symantec-connect-articles/scss/TabGroup.css" rel="stylesheet" type="text/css">

  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/symantec-connect-articles/'>Alex Hedley</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/symantec-connect-articles/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/symantec-connect-articles/tags">Tags</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/symantec-connect-articles/about">About</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead no-image">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            ServiceDesk - WebPart - Assignments and Audit Info
          </h1>
            <div class="meta">Published on Monday, 5 June 2017</div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
        <table>
<thead>
<tr>
<th>Version</th>
<th>SD 7.6</th>
</tr>
</thead>
</table>
<p>This download (Protirus.ServiceDesk.WebParts.dll) is a couple of custom Web Parts to show 'ServiceDesk Assignments' and the 'Auditing Incident Owner and Service Queue Changes'.</p>
<p><img src="images/WebParts-SAssignmentsandQueueInfo1.png" alt="WebParts - SD Assignments and Queue Info (1)" /></p>
<p>If you haven't see the following Article/Video I would advise doing so first.</p>
<p><strong>ServiceDesk 7.5 Track Assignments via Process Type Actions</strong><br />
<a href="https://community.broadcom.com/symantecenterprise/viewdocument?DocumentKey=b4d5684c-792b-4428-9988-3a8dcb568102&amp;CommunityKey=a067504a-9710-492c-bbef-18d2ed6b44af&amp;tab=librarydocuments">https://www-secure.symantec.com/connect/articles/servicedesk-75-track-assignments-process-type-actions</a></p>
<p><strong>Send Incident to Workflow - Auditing Incident Owner and Service Queue Changes</strong><br />
<a href="https://community.broadcom.com/symantecenterprise/viewdocument?DocumentKey=68be6670-379e-4fcb-bb87-e78145c07e1e&amp;CommunityKey=a067504a-9710-492c-bbef-18d2ed6b44af&amp;tab=librarydocuments">https://www-secure.symantec.com/connect/videos/send-incident-workflow-auditing-incident-owner-and-service-queue-changes</a></p>
<p>The idea is to save having to add Process Type Actions and an extra page to open and view, you can have all the information at your disposal on the Process View Page.</p>
<p>The Track Assignments you can use with only adding the below Stored Procedure to your DB but for the Auditing you will need to follow the video to add in the necessary tables via the Web App project.</p>
<p>As you can see in the Track Assignments article there is text file &quot;track_all_assignments.txt&quot; which we need to convert to a Stored Procedure, just add in the SessionID parameter and save as &quot;sp_SD_TrackAssignments&quot; (see attached) <strong>[sp_SD_TrackAssignments]</strong>.</p>
<p>Next we want a couple of SPs for the Audit info:</p>
<p><strong>[sp_SD_AuditProcessInfo]</strong></p>
<pre><code>SELECT [audit_process_info_id],[incident_session_id],[assigned_to_queue_name],[assigned_on_date],CASE 	WHEN [assigned_away_date] = '1753-01-01 00:00:00.000'		THEN			NULL		ELSE			[assigned_away_date]END 	AS [assigned_away_date],CASE 	WHEN [assigned_away_date] = '1753-01-01 00:00:00.000'		THEN			NULL 		ELSE			DATEDIFF(mi, [assigned_on_date], [assigned_away_date]) END 	AS [time_in_queue],[current_assignment]
FROM [audit_process_info]
WHERE [incident_session_id] = &#64;sessionid
ORDER BY[assigned_on_date] DESC
</code></pre>
<p><strong>[sp_SD_OwnerAuditInfo]</strong></p>
<pre><code>SELECT [owner_audit_info_id],[is_current_owner],[owner_email],[ownership_taken_on],CASE 	WHEN [ownership_relinquished] = '1753-01-01 00:00:00.000'		THEN			NULL		ELSE			[ownership_relinquished]END 	AS [ownership_relinquished],CASE 	WHEN [ownership_relinquished] = '1753-01-01 00:00:00.000'		THEN			NULL 		ELSE			DATEDIFF(mi, [ownership_taken_on], [ownership_relinquished]) END 	AS [ownership_time],[incident_session_id]
FROM [owner_audit_info]
WHERE[incident_session_id] = &#64;sessionid
ORDER BY[ownership_taken_on] DESC
</code></pre>
<p>Just update the first line to match the name of your Process Manager Instance and rename from &quot;.txt&quot; to &quot;.sql&quot; and run in your SSMS.</p>
<pre><code>USE [ProcessManager]
</code></pre>
<p>Now we need to upload the WebPart</p>
<p>Login to Process Manager</p>
<p>Admin -&gt; Portal -&gt; Plugin Upload</p>
<p>Choose <strong>WebPart</strong> from the &quot;Plugin Type&quot; and browse for the dll then click Upload.</p>
<p>This can take some time.</p>
<p>It will be saved to &quot;[workflow dir]:\ProcessManager\bin&quot;</p>
<p>You may need an IIS Reset or WF Services restart.</p>
<p>Go to Admin -&gt; Portal -&gt; Web Parts Catalog</p>
<p>Click on the <img src="images/document_add.png" alt="document_add" /> button and then give it a new Category name and search for each and add individually</p>
<ul>
<li>SDIncidentServiceQueueHistory</li>
<li>SDTrackAssignmentsWebPart</li>
</ul>
<p>Now these are available to add to the Process View Page.</p>
<p>Go to the Page in Admin -&gt; Portal -&gt; Manage Pages</p>
<p>Find your page and &quot;Go To Page&quot;</p>
<p>Site Actions | ModifyPage</p>
<p>Site Actions | Edit Page</p>
<p>Site Actions | Add Web Part</p>
<p>Now add the new web parts from the new Category you created and give them titles.</p>
<p>Here are a couple of examples depending on the state of the ticket:</p>
<p><img src="images/WebParts-SDAssignmentsandQueueInfo.png" alt="WebParts - SD Assignments and Queue Info" /></p>
<p>Old Links</p>
<p><strong>How to add a custom web part to a ServiceDesk/Workflow page in ServiceDesk/ Workflow 7.1 SP2 ?</strong></p>
<p><a href="https://support.symantec.com/en_US/article.TECH192190.html">https://support.symantec.com/en_US/article.TECH192190.html</a></p>
<p><strong>Custom Data Types, Incident Forms, and the Process View Page – Putting them All Together</strong></p>
<p><a href="https://community.broadcom.com/symantecenterprise/viewdocument?DocumentKey=886d8038-ffc4-4f70-88ec-f37cbe4a075e&amp;CommunityKey=a067504a-9710-492c-bbef-18d2ed6b44af&amp;tab=librarydocuments">https://www-secure.symantec.com/connect/articles/custom-data-types-incident-forms-and-process-view-page-putting-them-all-together</a></p>


        

      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
        <p class="copyright">Copyright &#xA9; 2023</p>

        <ul class="list-inline text-center small">
            <li class="list-inline-item">
              <a href="/symantec-connect-articles/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            </li>
            <li class="list-inline-item">
              <a href="/symantec-connect-articles/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            </li>
        </ul>
        <br />
        <div class="font-weight-bold small"><a href="https://statiq.dev">Generated by Statiq</a></div>
      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src='/symantec-connect-articles/vendor/bootstrap/js/bootstrap.bundle.min.js'></script>
  <script src='/symantec-connect-articles/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script src='/symantec-connect-articles/js/clean-blog.js'></script>
      <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CQV2ZWNX32"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-CQV2ZWNX32');
    </script>
  

</body>

</html>
